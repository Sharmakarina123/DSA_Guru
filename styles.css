@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Source+Code+Pro:wght@400;600&display=swap');

/* --- NEW COLOR THEME ROOTS --- */
:root {
    --primary-bg: #1b2430;
    --secondary-bg: #232d3f;
    --header-bg: #1b2430;
    --user-msg-bg: linear-gradient(135deg, #fd5e53 25%, #fbbf24 100%);
    --bot-msg-bg: #e3e8ee;
    --code-mentor-bg: linear-gradient(120deg, #5f6caf 60%, #28c2ff 100%);
    --text-color-light: #fff;
    --text-color-dark: #244969;
    --border-color: #c1c6d2;
    --font-family: 'Inter', sans-serif;
    --accent-color: #fe8040;
    --accent-glow: #73f1fc;
    --success-color: #16dbaa;
    --error-color: #fd5e53;
    --voice-color: #b05cff;
    --modal-bg: rgba(35, 45, 63, 0.95);
}
body.light-mode {
    --primary-bg: #f6f6f9;
    --secondary-bg: #fff;
    --header-bg: #e8eafc;
    --user-msg-bg: linear-gradient(135deg, #fd5e53 25%, #fbbf24 100%);
    --bot-msg-bg: #e3e8ee;
    --code-mentor-bg: linear-gradient(120deg, #a6b0e0 60%, #c8effe 100%);
    --text-color-light: #232d3f;
    --text-color-dark: #3d3d3d;
    --border-color: #d0d5dd;
    --accent-color: #fd5e53;
    --accent-glow: #fd5e53;
    --success-color: #16dbaa;
    --error-color: #fd5e53;
    --voice-color: #b05cff;
    --modal-bg: rgba(235, 236, 255, 0.96);
}


#profile-pic {
    display: none !important;
}

/* DSA Mentor title tweaks */
#header-title h1 {
    margin: 0;
    font-size: 1.32rem;
    font-weight: 800;
    letter-spacing: 1.2px;
    color: var(--accent-color);
    white-space: nowrap;
    text-shadow: 0 2px 10px #fd5e5333;
    display: flex;
    align-items: center;
    gap: 8px;
}
#header-title p {
    margin: 2px 0 0;
    font-size: 0.82rem;
    opacity: 0.85;
    font-weight: 400;
    color: var(--accent-color);
    white-space: nowrap;
    text-overflow: ellipsis;
    max-width: 210px;
    overflow: hidden;
    text-shadow: 0 1px 4px #fd5e5333;
}

/* Feature Tour Modal - new style */
.feature-tour {
    display: none;
    position: fixed;
    z-index: 1200;
    left: 50%; top: 50%; transform: translate(-50%, -53%);
    background: linear-gradient(120deg, #fff 90%, #fd5e53 100%);
    border-radius: 18px;
    border: 3px solid #fd5e53;
    min-width: 320px;
    max-width: 410px;
    width: 93vw;
    box-shadow: 0 10px 50px #fd5e5344;
    padding: 32px 18px 26px 18px;
    color: #fd5e53;
    text-align: left;
    animation: fadeIn 0.3s;
    font-family: 'Inter', sans-serif;
}
.feature-tour-header {
    display: flex; align-items: center; gap: 16px; margin-bottom: 16px; justify-content: center;
}
.feature-tour-emoji {
    font-size: 2.1rem;
    filter: drop-shadow(0 2px 8px #fbbf24aa);
}
.feature-tour h3 {
    color: #111;
    font-size: 1.33rem;
    margin: 0;
    font-weight: 700;
    letter-spacing: 1px;
}
.feature-tour-list {
    margin-bottom: 22px;
    display: flex;
    flex-direction: column;
    gap: 13px;
}
.feature-tour-item {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    background: linear-gradient(90deg, #fbbf24 0%, #fff 100%);
    border-radius: 12px;
    padding: 9px 16px 9px 11px;
    font-size: 1.05em;
    color: #232d3f;
    box-shadow: 0 2px 14px #fd5e5312;
    border: 1.5px solid #fd5e5344;
    font-weight: 500;
    transition: background 0.18s, color 0.18s;
}
.feature-tour-item:hover {
    background: linear-gradient(90deg, #fd5e53 0%, #fbbf24 100%);
    color: #fff;
}
.feature-emoji {
    font-size: 1.28em;
    margin-right: 6px;
    flex-shrink: 0;
}
.feature-desc {
    font-weight: 400;
    margin-left: 4px;
    font-size: .98em;
    opacity: 0.9;
    font-style: italic;
}
.feature-tour button {
    background: linear-gradient(90deg, #fd5e53 70%, #fbbf24 100%);
    color: #fff;
    border: none;
    padding: 10px 22px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    display: block;
    margin: 0 auto;
    font-size: 1.09rem;
    transition: background 0.23s;
    box-shadow: 0 2px 10px #fd5e5340;
    letter-spacing: .2px;
}
.feature-tour button:hover { background: linear-gradient(90deg, #fbbf24 70%, #fd5e53 100%); color: #fff; }


/* Theme Toggle Switch */
.mode-toggle-container {
    display: flex;
    align-items: center;
    margin-right: 10px;
    margin-left: 8px;
}
.theme-toggle-checkbox {
    display: none;
}
.theme-toggle-label {
    display: flex;
    align-items: center;
    cursor: pointer;
    width: 52px;
    height: 26px;
    background: var(--bot-msg-bg);
    border-radius: 99px;
    position: relative;
    border: 1.5px solid var(--border-color);
    transition: background 0.3s;
    margin: 0 8px;
}
.theme-toggle-label i {
    font-size: 1.05rem;
    color: var(--accent-color);
    z-index: 2;
    position: absolute;
    transition: color 0.25s;
}
.theme-toggle-label .fa-sun { left: 9px; top: 7px;}
.theme-toggle-label .fa-moon { right: 10px; top: 7px;}
.theme-toggle-slider {
    position: absolute;
    left: 3px; top: 3px;
    width: 20px; height: 20px;
    background: #fff;
    border-radius: 50%;
    transition: transform 0.3s cubic-bezier(.52,.1,.13,.95);
    box-shadow: 0 2px 7px #73f1fc55;
    z-index: 3;
}
.theme-toggle-checkbox:checked + .theme-toggle-label .theme-toggle-slider {
    transform: translateX(25px);
}
.theme-toggle-checkbox:not(:checked) + .theme-toggle-label .fa-sun {
    color: #ffd966;
}
.theme-toggle-checkbox:checked + .theme-toggle-label .fa-moon {
    color: #fd5e53;
}
.theme-toggle-checkbox:not(:checked) + .theme-toggle-label .fa-moon {
    color: var(--border-color);
}
.theme-toggle-checkbox:checked + .theme-toggle-label .fa-sun {
    color: var(--border-color);
}

/* Floating Premium Badge */
.floating-premium-badge {
    position: fixed;
    top: 30px;
    right: 40px;
    z-index: 1500;
    background: linear-gradient(90deg, #fd5e53, #fbbf24 60%, #73f1fc 100%);
    color: #12213a;
    border-radius: 30px;
    padding: 8px 22px 8px 18px;
    font-weight: 700;
    box-shadow: 0 5px 30px #fd5e5344;
    display: flex;
    align-items: center;
    gap: 7px;
    font-size: 1.09rem;
    letter-spacing: 0.05em;
    border: 2px solid #fbbf24;
    animation: floatY 3s ease-in-out infinite;
    cursor: pointer;
    transition: background 0.3s;
}
.floating-premium-badge:hover {
    background: linear-gradient(90deg, #fbbf24 30%, #fd5e53 60%, #73f1fc 100%);
    color: #fffefb;
}
.floating-premium-badge i {
    color: #fffefb;
    filter: drop-shadow(0 2px 5px #fd5e53ad);
}
@keyframes floatY {
    0%,100%{ transform:translateY(0);}
    50%{ transform:translateY(-10px);}
}

body {
    font-family: var(--font-family);
    color: var(--text-color-dark);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    background: radial-gradient(circle at 20% 50%, #fbbf2433 0%, var(--primary-bg) 100%);
    overflow: hidden;
}

body::before {
    content: "";
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background:
        linear-gradient(rgba(253,94,83,0.1) 1px, transparent 1px),
        linear-gradient(90deg, rgba(253,94,83,0.1) 1px, transparent 1px);
    background-size: 60px 60px;
    animation: gridMove 40s linear infinite;
    z-index: -2;
}
@keyframes gridMove {
    0% { background-position: 0 0; }
    100% { background-position: 1200px 1200px; }
}

/* Main chat container */
#chat-container {
    width: 100%;
    max-width: 900px;
    height: 95vh;
    max-height: 950px;
    display: flex;
    flex-direction: column;
    background: var(--secondary-bg);
    border-radius: 18px;
    box-shadow: 0 0 40px 10px #fd5e5320, 0 8px 16px 0 #fbbf2422;
    overflow: hidden;
    border: 2px solid var(--border-color);
    backdrop-filter: blur(12px);
    position: relative;
    transition: transform 0.3s cubic-bezier(.75,-0.03,0,0.96);
}

.feature-badge.gradient-glow {
    text-align: center;
    padding: 12px 0;
    font-size: 1.02rem;
    font-weight: 700;
    letter-spacing: 1px;
    background: linear-gradient(90deg, #fd5e53 60%, #fbbf24 100%);
    color: #fff;
    box-shadow: 0 2px 24px #fd5e53cc, 0 1px 8px #fbbf2477;
    border-bottom-left-radius: 16px;
    border-bottom-right-radius: 16px;
    border-top: none;
    filter: blur(0.0px);
    position: relative;
    z-index: 2;
}

#chat-header {
    background: var(--header-bg);
    color: var(--text-color-light);
    padding: 14px 20px;
    display: flex;
    align-items: center;
    flex-shrink: 0;
    position: relative;
    border-bottom: 2px solid var(--border-color);
    z-index: 10;
    gap: 10px;
}
.profile-link {
    display: flex;
    align-items: center;
    text-decoration: none;
    flex-grow: 1;
    margin-right: auto;
    min-width: 0;
}
#profile-pic {
    width: 45px;
    height: 45px;
    border-radius: 50%;
    border: 2.5px solid var(--accent-color);
    margin-right: 15px;
    object-fit: cover;
    transition: all 0.3s cubic-bezier(.52,.1,.13,.95);
    background: linear-gradient(135deg, #fbbf24, #fd5e53 80%);
    display: flex; justify-content: center; align-items: center;
    box-shadow: 0 0 8px #fd5e5344;
    position: relative; overflow: hidden;
}
#profile-pic::before {
    content: "";
    position: absolute;
    width: 160%;
    height: 160%;
    background: conic-gradient(transparent, var(--accent-color), transparent 40%);
    animation: rotate 4s linear infinite;
}
#profile-pic img {
    position: relative;
    z-index: 1;
    background: var(--header-bg);
    border-radius: 50%;
    padding: 2px;
    width: 100%; height: 100%;
    object-fit: cover;
}
@keyframes rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}
#header-title h1 {
    margin: 0;
    font-size: 1.18rem;
    font-weight: 700;
    letter-spacing: 0.5px;
    color: var(--accent-color);
    white-space: nowrap;
    text-shadow: 0 2px 10px #fd5e5333;
}
#header-title p {
    margin: 2px 0 0;
    font-size: 0.8rem;
    opacity: 0.85;
    font-weight: 400;
    color: var(--accent-color);
    white-space: nowrap;
    text-overflow: ellipsis;
    max-width: 170px;
    overflow: hidden;
    text-shadow: 0 1px 4px #fd5e5333;
}

.tool-button {
    background: #f6f6f9;
    border: 2px solid var(--border-color);
    color: var(--accent-color);
    border-radius: 12px;
    padding: 7px 11px;
    margin-left: 7px;
    font-size: 1.14rem;
    box-shadow: 0 2px 14px #fd5e5310;
    transition: all 0.21s;
    cursor: pointer;
    display: flex; align-items: center; justify-content: center;
}
.tool-button:hover, .premium-btn:focus {
    background: #fbbf24;
    color: #fff;
    border-color: #fd5e53;
    box-shadow: 0 2px 16px #fd5e5322;
}
.premium-btn {
    background: linear-gradient(90deg, #fd5e53, #fbbf24 80%, #73f1fc 100%);
    color: #fff;
    border: none;
    font-weight: 700;
    font-size: 1.13rem;
    margin-right: 5px;
    padding: 8px 13px;
    box-shadow: 0 4px 18px #fd5e5340;
}
.premium-btn i { color: #fff; margin-right: 3px;}
.premium-btn:hover { background: linear-gradient(90deg, #fbbf24 70%, #fd5e53 100%); color: #fff;}

/* Switch toggle (Code Debugger) */
.switch-container { display: flex; align-items: center; gap: 10px; margin-left: 12px;}
.switch-text { font-size: 0.76rem; color: var(--accent-color); font-weight: 500; white-space: nowrap;}
.switch { position: relative; display: inline-block; width: 44px; height: 22px; }
.switch input { opacity: 0; width: 0; height: 0;}
.slider {
    position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
    background-color: #fbbf24;
    border-radius: 22px; transition: .4s;
}
.slider:before {
    position: absolute; content: ""; height: 18px; width: 18px; left: 2px; bottom: 2px;
    background-color: #fff; transition: .4s; border-radius: 50%;
    box-shadow: 0 2px 6px #fd5e531a;
}
input:checked + .slider { background-color: #fd5e53;}
input:checked + .slider:before { transform: translateX(22px); }

/* Chat messages area */
#chat-box {
    flex-grow: 1;
    padding: 26px 24px 24px 24px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 18px;
    background:
        radial-gradient(circle at 20% 30%, rgba(253,94,83, 0.07) 0%, transparent 40%),
        radial-gradient(circle at 80% 70%, rgba(251,191,36, 0.05) 0%, transparent 40%),
        var(--primary-bg);
    position: relative;
    scroll-behavior: smooth;
}

/* Redesigned message styling */
.message {
    max-width: 82%;
    padding: 16px 22px;
    border-radius: 18px 18px 7px 18px;
    line-height: 1.68;
    word-wrap: break-word;
    white-space: pre-wrap;
    font-size: 1.01rem;
    position: relative;
    box-shadow: 0 6px 20px #fd5e5310, 0 2px 8px #fbbf2410;
    border: 1.2px solid transparent;
    opacity: 0;
    animation: fadeIn 0.5s cubic-bezier(.46,.03,.52,.96) forwards;
    margin-bottom: 0;
}
@keyframes fadeIn { to { opacity: 1; } }

.user-message {
    background: var(--user-msg-bg);
    color: #fff;
    align-self: flex-end;
    border-bottom-right-radius: 7px;
    border-top-right-radius: 24px;
    border: 1.2px solid #fd5e53;
    box-shadow: 0 2px 16px #fd5e5322;
}
.bot-message {
    background: var(--bot-msg-bg);
    color: var(--text-color-dark);
    align-self: flex-start;
    border-bottom-left-radius: 7px;
    border-top-left-radius: 24px;
    border: 1.2px solid #fbbf24;
    box-shadow: 0 2px 16px #fbbf2411;
}
.code-mentor-message {
    background: var(--code-mentor-bg);
    color: #fff;
    align-self: flex-start;
    border-bottom-left-radius: 7px;
    border-top-left-radius: 24px;
    border: 1.2px solid #28c2ff;
    box-shadow: 0 2px 16px #28c2ff33;
}
.error-message {
    background: rgba(253,94,83,0.13);
    color: #fd5e53;
    border: 1.6px solid #fd5e53;
    align-self: flex-start;
    border-bottom-left-radius: 7px;
}

.typing-indicator {
    background: var(--bot-msg-bg);
    padding: 12px 18px;
    border-radius: 18px;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    width: fit-content;
    box-shadow: 0 5px 20px #fd5e5310;
    position: relative;
    border-bottom-left-radius: 6px;
}
.typing-indicator::before {
    content: "Mentor is typing...";
    position: absolute;
    top: -18px; left: 0;
    font-size: 0.62rem;
    color: var(--accent-color);
    opacity: 0.8; letter-spacing: 1px;
}
.typing-indicator span {
    display: inline-block;
    width: 8px; height: 8px;
    border-radius: 50%;
    background: var(--accent-color);
    animation: bounce 1.3s infinite;
}
.typing-indicator span:nth-child(1) { animation-delay: 0.1s; }
.typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
.typing-indicator span:nth-child(3) { animation-delay: 0.3s; }
@keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }

/* Input area */
#input-area {
    display: flex; flex-direction: column;
    padding: 16px 15px 15px 15px;
    border-top: 2px solid var(--border-color);
    background: var(--secondary-bg);
    flex-shrink: 0; position: relative;
}
#input-form {
    display: flex; align-items: center; gap: 10px;
}
#message-input {
    flex-grow: 1;
    border: 2px solid var(--border-color);
    border-radius: 25px;
    padding: 13px 18px;
    font-size: 1.06rem;
    outline: none;
    transition: all 0.3s;
    background: var(--primary-bg);
    color: var(--text-color-dark);
    font-family: var(--font-family);
    box-shadow: 0 2px 11px #fd5e5310 inset;
}
#message-input:focus {
    border-color: var(--accent-color);
    box-shadow: 0 0 18px #fd5e5333;
}
#message-input::placeholder {
    color: rgba(253,94,83,0.36);
    font-size: 1rem;
}

.chat-button {
    border: none;
    border-radius: 50%;
    width: 44px; height: 44px;
    cursor: pointer;
    font-size: 1.2rem;
    display: flex; justify-content: center; align-items: center;
    transition: all 0.28s;
    box-shadow: 0 5px 14px #fbbf2417;
}
#send-button {
    background: linear-gradient(135deg, var(--accent-color), #fbbf24);
    color: white;
}
#send-button:hover { transform: scale(1.11); }
#voice-button {
    background: linear-gradient(135deg, var(--voice-color), #fd5e53);
    color: white;
}
#voice-button.listening {
    animation: pulseRecording 1.5s infinite;
}
@keyframes pulseRecording {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.08); }
}

/* Markdown formatting styles */
.message h2 {
    margin: 16px 0 8px;
    padding-bottom: 6px;
    border-bottom: 2px solid var(--border-color);
    font-size: 1.22em;
    color: var(--accent-color);
    font-weight: 700;
}
.message h3 {
    margin: 14px 0 6px;
    font-size: 1.07em;
    color: var(--accent-color);
    font-weight: 500;
}
.message ul, .message ol {
    margin: 10px 0;
    padding-left: 27px;
}
.message li {
    margin-bottom: 6px;
}
.message strong {
    color: #fd5e53;
    font-weight: 600;
}
.message em {
    font-style: italic;
    color: var(--text-color-dark);
}

/* Code block styling */
.code-block {
    margin-top: 14px;
    border-radius: 9px;
    overflow: hidden;
    border: 2px solid var(--border-color);
    box-shadow: 0 0 18px #00000028;
}
.code-header {
    background: #23283a;
    padding: 8px 14px;
    display: flex; justify-content: space-between; align-items: center;
    font-size: 0.85rem;
    color: var(--accent-color);
    font-family: 'Source Code Pro', monospace;
}
.copy-code-btn {
    background: none;
    border: none;
    color: var(--text-color-dark);
    cursor: pointer;
    font-size: 1rem;
    padding: 4px;
    border-radius: 4px;
    transition: background 0.2s, color 0.2s;
}
.copy-code-btn:hover {
    background: rgba(253, 94, 83, 0.13);
    color: var(--accent-color);
}
.copy-code-btn .fa-check {
    color: var(--success-color);
}
.code-block pre {
    margin: 0;
    background: #1b2430;
    padding: 16px 16px 16px 20px;
    max-height: 350px;
    overflow-y: auto;
}
.code-block code {
    font-family: 'Source Code Pro', monospace;
    white-space: pre-wrap;
    color: #fd5e53;
    font-size: 0.93rem;
}

/* Chat History Sidebar */
#chat-history {
    position: fixed; top: 0; left: -340px;
    width: 340px; height: 100vh;
    background: #232d3f;
    border-right: 2px solid var(--border-color);
    z-index: 1000;
    transition: left 0.32s cubic-bezier(.38,1.09,.49,.97);
    display: flex; flex-direction: column;
    padding: 17px 13px 13px 13px;
    box-shadow: 0 0 25px #fd5e5322;
}
#chat-history.active { left: 0; }
.history-header h3 { color: var(--accent-color); }
#history-list { flex-grow: 1; overflow-y: auto; }
.history-item {
    padding: 13px 12px 13px 17px;
    margin-bottom: 10px;
    border-radius: 11px;
    background: var(--secondary-bg);
    cursor: pointer;
    transition: all 0.2s cubic-bezier(.38,1.09,.49,.97);
    position: relative;
    border-left: 4px solid transparent;
}
.history-item:hover { background: var(--bot-msg-bg); }
.history-item.active {
    background: var(--code-mentor-bg);
    border-left: 4px solid var(--accent-color);
    color: #fff;
}
.history-preview { font-size: 0.96rem; color: var(--text-color-light); }
.history-date { font-size: 0.74rem; color: var(--accent-color); }
#new-chat-btn {
    background: var(--accent-color);
    color: var(--primary-bg);
    border: none;
    padding: 13px;
    border-radius: 8px;
    margin-top: 17px;
    width: 100%;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.19s;
    display: flex; align-items: center; justify-content: center;
    gap: 8px;
    font-size: 1.04rem;
}
#new-chat-btn:hover { background: #fd5e53; color: #fff; }

.close-history { background: none; border: none; color: var(--text-color-dark); font-size: 1.13rem; cursor: pointer; padding: 5px; }
.history-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 17px; padding-bottom: 10px; border-bottom: 1px solid var(--border-color); }
.history-preview { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; padding-right: 20px; }
.history-date { margin-top: 5px; }
.history-actions { position: absolute; right: 8px; top: 50%; transform: translateY(-50%); display: flex; gap: 7px; opacity: 0; transition: opacity 0.2s; }
.history-item:hover .history-actions { opacity: 1; }
.history-action-btn { background: none; border: none; color: var(--text-color-dark); font-size: 0.87rem; cursor: pointer; opacity: 0.7; transition: opacity 0.3s; }
.history-action-btn:hover { opacity: 1; }

#clear-history-btn {
    background: #fd5e53;
    color: #fff;
    border: none;
    padding: 13px;
    border-radius: 8px;
    margin-top: 10px;
    width: 100%;
    font-weight: bold;
    cursor: pointer;
    transition: background 0.19s;
    display: flex; align-items: center; justify-content: center;
    gap: 8px;
    font-size: 1.04rem;
}
#clear-history-btn:hover { background: #d7263d; }



/* Feature Tour Modal */
.overlay { background: rgba(253,94,83, 0.53); }
.overlay.active { display: block; }
.feature-tour {
    display: none;
    position: fixed;
    z-index: 1200;
    left: 50%; top: 50%; transform: translate(-50%, -53%);
    background: linear-gradient(120deg, #fff 70%, #fbbf24 100%);
    border-radius: 17px;
    border: 2.5px solid #fd5e53;
    min-width: 330px;
    max-width: 430px;
    width: 90vw;
    box-shadow: 0 10px 50px #fd5e5344;
    padding: 32px 28px 26px 28px;
    color: #fd5e53;
    text-align: left;
    animation: fadeIn 0.3s;
}
.feature-tour.active { display: block; }
.feature-tour-header {
    display: flex; align-items: center; gap: 12px; margin-bottom: 5px;
}
.feature-tour-header i {
    font-size: 2rem; color: #fbbf24; filter: drop-shadow(0 2px 8px #fd5e53aa);
    text-shadow: 0 2px 8px #fd5e53aa;
}
.feature-tour h3 { color: #fd5e53; font-size: 1.26rem; margin: 0;}
.feature-tour p { margin-bottom: 15px; line-height: 1.5; font-size: 0.97rem; color: #fbbf24;}
.feature-tour ul { margin-bottom: 20px; padding-left: 25px; }
.feature-tour li {
    margin-bottom: 12px; line-height: 1.55; font-size: 0.98rem;
    display: flex; align-items: flex-start; gap: 9px;
    color: #fd5e53;
}
.feature-tour li i { color: #fbbf24; margin-top: 3px; }
.feature-tour button {
    background: linear-gradient(90deg, #fbbf24 70%, #fd5e53 100%);
    color: #fff;
    border: none;
    padding: 10px 18px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    display: block;
    margin: 0 auto;
    font-size: 1.07rem;
    transition: background 0.23s;
    box-shadow: 0 2px 10px #fd5e5340;
}
.feature-tour button:hover { background: linear-gradient(90deg, #fd5e53 70%, #fbbf24 100%); color: #fff; }

/* Modal overlays */
.confirmation-modal {
    position: fixed; top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(253,94,83, 0.7);
    z-index: 1101;
    display: none; justify-content: center; align-items: center;
}
.confirmation-modal.active { display: flex; }
.modal-content {
    padding: 24px 26px 22px 26px;
    width: 90%; max-width: 410px;
    background: var(--secondary-bg);
    border-radius: 14px;
    border: 2px solid var(--accent-color);
    box-shadow: 0 0 26px #fd5e5323;
}
.modal-content h3 { color: var(--accent-color); margin-bottom: 8px;}
.modal-content p { margin-bottom: 22px; text-align: center; }
.modal-content input {
    width: 100%; padding: 12px; margin-bottom: 20px; border-radius: 7px;
    font-family: var(--font-family); background: var(--primary-bg);
    color: var(--text-color-dark); border: 1.2px solid var(--border-color);
}
.modal-buttons { display: flex; justify-content: center; gap: 12px; }
.modal-buttons button {
    padding: 10px 17px; border-radius: 7px; cursor: pointer; font-weight: bold; transition: all 0.2s;
    font-size: 1.03rem;
}
#confirm-delete, #save-title {
    background: var(--error-color); color: white; border: none;
}
#confirm-delete:hover, #save-title:hover { background: #fd5e53ee; }
#cancel-delete, #cancel-edit {
    background: var(--bot-msg-bg); color: var(--text-color-dark); border: none;
}
#cancel-delete:hover, #cancel-edit:hover { background: #d0d5dd; }

/* Voice Message UI */
.voice-message-ui {
    display: flex; align-items: center; gap: 8px;
    padding: 10px 14px;
    background: rgba(253,94,83, 0.17);
    border-radius: 20px;
    margin-top: 10px;
    border: 1.4px solid rgba(253,94,83,0.3);
    display: none;
}
.voice-message-ui.active { display: flex; animation: fadeIn 0.3s; }
.voice-message-ui span { font-size: 0.87rem; color: var(--voice-color); }
.waveform {
    display: flex; gap: 3px; align-items: center; height: 18px; flex-grow: 1;
}
.waveform-bar {
    display: inline-block; width: 3px; height: 8px;
    background: var(--voice-color); border-radius: 3px;
    animation: waveform 1.5s infinite ease-in-out;
}
@keyframes waveform { 0%, 100% { transform: scaleY(0.5); } 50% { transform: scaleY(1.5); } }
.waveform-bar:nth-child(1) { animation-delay: 0.1s; }
.waveform-bar:nth-child(2) { animation-delay: 0.2s; height: 12px; }
.waveform-bar:nth-child(3) { animation-delay: 0.3s; height: 16px; }
.waveform-bar:nth-child(4) { animation-delay: 0.4s; height: 12px; }
.waveform-bar:nth-child(5) { animation-delay: 0.5s; }
#cancel-voice { background: none; border: none; color: var(--voice-color); font-size: 1rem; cursor: pointer; margin-left: 8px; }

@media (max-width: 1020px) {
    #chat-container { max-width: 98vw; }
    .feature-tour { min-width: 0; max-width: 98vw;}
}
@media (max-width: 768px) {
    #chat-container { height: 100vh; width: 100vw; border-radius: 0; max-height: none; }
    body { background-attachment: fixed; }
    .message { max-width: 96%; font-size: 0.99rem; padding: 12px 10px; }
    #input-area { padding: 7px; }
    #message-input { padding: 10px 13px; font-size: 0.98rem; }
    .chat-button { width: 40px; height: 40px; font-size: 1rem; }
    #chat-history { width: 90vw; left: -90vw; }
    #header-title h1 { font-size: 1.08rem; }
    #header-title p { font-size: 0.67rem; }
    .tool-button { padding: 5px 8px; font-size: 0.85rem; }
    .floating-premium-badge { top: 12px; right: 10px; font-size: 0.95rem; }
}

#message-input {
    color: #fff; 
}

#message-input::placeholder {
    color: #fff !important; 
    opacity: 0.82; 
}


/* --- Preloader Styles (from previous answer, with new colors) --- */
#preloader {
    position: fixed;
    z-index: 3000;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: var(--primary-bg, #1b2430);
    color: var(--accent-color, #fd5e53);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: opacity 0.6s cubic-bezier(.8,.3,.2,1), visibility 0.6s;
    overflow: hidden;
}
#preloader::before {
    content: "";
    pointer-events: none;
    position: absolute;
    inset: 0;
    background: 
      repeating-linear-gradient(90deg, rgba(253,94,83,0.03) 0 1px, transparent 1px 60px),
      repeating-linear-gradient(0deg,  rgba(253,94,83,0.03) 0 1px, transparent 1px 60px),
      radial-gradient(circle, rgba(251,191,36,0.08) 10%, transparent 70%);
    animation: preloaderGridMove 18s linear infinite;
    z-index: 0;
}
@keyframes preloaderGridMove {
    to { background-position: 80px 80px, 0px 60px, 0 50px; }
}

#preloader.hide {
    opacity: 0;
    pointer-events: none;
    visibility: hidden;
}
.preloader-content {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 38px;
    z-index: 1;
    animation: fadeIn 0.6s;
}
.preloader-title {
    display: flex;
    flex-direction: column;
    gap: 10px;
    align-items: center;
}
.preloader-myname {
    font-size: 2.45rem;
    font-weight: 800;
    letter-spacing: 1.5px;
    color: #fbbf24;
    background: linear-gradient(90deg, #fd5e53 25%, #73f1fc 70%, #fbbf24 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    filter: drop-shadow(0 2px 12px #fbbf2444);
    font-family: var(--font-family, 'Inter', sans-serif);
}
.preloader-heart {
    font-size: 1.13rem;
    color: var(--text-color-dark, #244969);
    opacity: 0.98;
    font-family: 'Inter', cursive, sans-serif;
    background: linear-gradient(90deg, #fd5e53 10%, #b05cff 50%, #fbbf24 90%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.preloader-slogan {
    font-size: 1.13rem;
    color: #fd5e53;
    font-weight: 600;
    margin-top: 7px;
    letter-spacing: 0.02em;
    text-shadow: 0 2px 10px #fbbf2420;
    font-family: 'Inter', sans-serif;
    background: linear-gradient(90deg, #fd5e53 0%, #fbbf24 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}


.preloader-algos {
    display: flex;
    gap: 13px;
    font-size: 1.07rem;
    flex-wrap: wrap;
    min-height: 28px;
    justify-content: center;
    align-items: center;
    margin-top: 8px;
}
.preloader-algos .algo {
    opacity: 0.18;
    font-weight: 600;
    font-family: 'Source Code Pro', monospace;
    transition: 
        opacity 0.3s,
        color 0.3s,
        background 0.3s,
        transform 0.25s cubic-bezier(.5,1.7,.7,1.3);
    background: #244969;
    color: var(--accent-color, #fd5e53);
    border-radius: 14px;
    padding: 6px 18px;
    border: 1.5px solid #c1c6d2;
    box-shadow: 0 2px 8px #fd5e5310;
    font-size: 1.04em;
    letter-spacing: 0.2px;
    position: relative;
}
.preloader-algos .algo.active {
    opacity: 1;
    background: linear-gradient(90deg, #fbbf24 60%, #fd5e53 100%);
    color: #244969;
    border: 1.5px solid #fd5e53;
    box-shadow: 0 2px 16px #fbbf2466;
    font-size: 1.18em;
    transform: scale(1.07) translateY(-4px);
    z-index: 1;
}
.preloader-spinner {
    margin-top: 24px;
    width: 52px; height: 52px;
    border: 5px solid #fd5e53;
    border-top: 5px solid #fbbf24;
    border-bottom: 5px solid #73f1fc;
    border-radius: 50%;
    box-shadow: 0 2px 16px #fd5e5322, 0 1px 4px #fbbf2499;
    animation: preloader-spin 1.1s linear infinite;
}
@keyframes preloader-spin {
    to { transform: rotate(360deg);}
}
@media (max-width: 600px) {
    .preloader-myname { font-size: 1.3rem; }
    .preloader-content { gap: 20px;}
    .preloader-algos { gap: 8px; }
    .preloader-algos .algo { padding: 4px 10px; font-size: 0.92em; }
    .preloader-spinner { width: 34px; height: 34px; border-width: 3px;}
}